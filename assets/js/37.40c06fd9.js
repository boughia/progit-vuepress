(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{312:function(t,i,e){t.exports=e.p+"assets/img/git-instaweb.4839b199.png"},514:function(t,i,e){"use strict";e.r(i);var a=e(28),s=Object(a.a)({},(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"gitweb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitweb"}},[t._v("#")]),t._v(" GitWeb")]),t._v(" "),a("p",[t._v("\n如果你对项目有读写权限或只读权限，你可能需要建立起一个基于网页的简易查看器。\nGit 提供了一个叫做 GitWeb 的 CGI 脚本来做这项工作。")]),t._v(" "),a("figure",{staticClass:"image",attrs:{id:"gitweb"}},[a("div",{staticClass:"content"},[a("img",{attrs:{src:e(312),alt:"GitWeb 的网页用户界面"}})]),t._v(" "),a("figcaption",[t._v("Figure 1. GitWeb 的网页用户界面")])]),t._v(" "),a("p",[t._v("如果你想要查看 GitWeb 如何展示你的项目，并且在服务器上安装了轻量级 Web 服务器比如 "),a("code",{staticClass:"literal"},[t._v("lighttpd")]),t._v(" 或 "),a("code",{staticClass:"literal"},[t._v("webrick")]),t._v("，\nGit 提供了一个命令来让你启动一个临时的服务器。\n在 Linux 系统的电脑上，"),a("code",{staticClass:"literal"},[t._v("lighttpd")]),t._v(" 通常已经安装了，所以你只需要在项目目录里执行 "),a("code",{staticClass:"literal"},[t._v("git instaweb")]),t._v(" 命令即可。\n如果你使用 Mac 系统， Mac OS X Leopard 系统已经预安装了 Ruby，所以 "),a("code",{staticClass:"literal"},[t._v("webrick")]),t._v(" 或许是你最好的选择。\n如果不想使用 lighttpd 启动 "),a("code",{staticClass:"literal"},[t._v("instaweb")]),t._v(" 命令，你需要在执行时加入 "),a("code",{staticClass:"literal"},[t._v("--httpd")]),t._v(" 参数。")]),t._v(" "),a("pre",{staticClass:"language-bash"},[a("code",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("$")]),t._v(" git instaweb --httpd=webrick\n[2009-02-21 10:02:21] INFO  WEBrick 1.3.1\n[2009-02-21 10:02:21] INFO  ruby 1.8.6 (2008-03-03) [universal-darwin9.0]")])]),t._v(" "),a("p",[t._v("这个命令启动了一个监听 1234 端口的 HTTP 服务器，并且自动打开了浏览器。\n这对你来说十分方便。\n当你已经完成了工作并想关闭这个服务器，你可以执行同一个命令，并加上 "),a("code",{staticClass:"literal"},[t._v("--stop")]),t._v(" 选项：")]),t._v(" "),a("pre",{staticClass:"language-bash"},[a("code",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("$")]),t._v(" git instaweb --httpd=webrick --stop")])]),t._v(" "),a("p",[t._v("如果你现在想为你的团队或你托管的开源项目持续的运行这个页面，你需要通过普通的 Web 服务器来设置 CGI 脚本。\n一些 Linux 发行版的软件库有 "),a("code",{staticClass:"literal"},[t._v("gitweb")]),t._v(" 包，可以通过 "),a("code",{staticClass:"literal"},[t._v("apt")]),t._v(" 或 "),a("code",{staticClass:"literal"},[t._v("dnf")]),t._v(" 来安装，你可以先试试。\n接下来我们来快速的了解一下如何手动安装 GitWeb。\n首先，你需要获得 Git 的源代码，它包含了 GitWeb ，并可以生成自定义的 CGI 脚本：")]),t._v(" "),a("pre",{staticClass:"language-bash"},[a("code",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("$")]),t._v(" git clone git://git.kernel.org/pub/scm/git/git.git\n"),a("span",{staticStyle:{"font-weight":"bold"}},[t._v("$")]),t._v(" cd git/\n"),a("span",{staticStyle:{"font-weight":"bold"}},[t._v("$")]),t._v(" make GITWEB_PROJECTROOT="),a("span",{staticStyle:{"font-style":"italic"}},[t._v('"/srv/git"')]),t._v(" prefix=/usr gitweb\n    SUBDIR gitweb\n    SUBDIR ../\nmake[2]: `GIT-VERSION-FILE' is up to date.\n    GEN gitweb.cgi\n    GEN static/gitweb.js\n"),a("span",{staticStyle:{"font-weight":"bold"}},[t._v("$")]),t._v(" sudo cp -Rf gitweb /var/www/")])]),t._v(" "),a("p",[t._v("需要注意的是，你需要在命令中指定 "),a("code",{staticClass:"literal"},[t._v("GITWEB_PROJECTROOT")]),t._v(" 变量来让程序知道你的 Git 版本库的位置。\n现在，你需要在 Apache 中使用这个 CGI 脚本，你需要为此添加一个虚拟主机：")]),t._v(" "),a("pre",{staticClass:"language-bash"},[a("code",[t._v("<VirtualHost *:80>\n    ServerName gitserver\n    DocumentRoot /var/www/gitweb\n    <Directory /var/www/gitweb>\n        Options +ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch\n        AllowOverride All\n        order allow,deny\n        Allow from all\n        AddHandler cgi-script cgi\n        DirectoryIndex gitweb.cgi\n    </Directory>\n</VirtualHost>")])]),t._v(" "),a("p",[t._v("再次提醒，GitWeb 可以通过任何一个支持 CGI 或 Perl 的网络服务器架设；如果你需要的话，架设起来应该不会很困难。\n现在，你可以访问 "),a("code",{staticClass:"literal"},[t._v("http://gitserver/")]),t._v(" 在线查看你的版本库。")])])}),[],!1,null,null,null);i.default=s.exports}}]);